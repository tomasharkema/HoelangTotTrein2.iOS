//
//  Test07+JsonGen.swift
//
//  Auto generated by swift-json-gen on Thu, 05 Nov 2015 07:19:20 GMT
//  See for details: https://github.com/tomlokhorst/swift-json-gen
//

import Foundation

extension Test07 {
  static func decodeJson(json: AnyObject) throws -> Test07 {
    guard let dict = json as? [String : AnyObject] else {
      throw JsonDecodeError.WrongType(rawValue: json, expectedType: "Object")
    }

    var errors: [String: JsonDecodeError] = [:]

    var one_optional: Int?
    var nested_optional: Test07.Nested?

    if let one_field: AnyObject = dict["one"] {
      do {
        one_optional = try Int.decodeJson(one_field)
      }
      catch let error as JsonDecodeError {
        errors["one"] = error
      }
    }
    else {
      errors["one"] = JsonDecodeError.MissingField
    }

    if let nested_field: AnyObject = dict["nested"] {
      do {
        nested_optional = try Test07.Nested.decodeJson(nested_field)
      }
      catch let error as JsonDecodeError {
        errors["nested"] = error
      }
    }
    else {
      errors["nested"] = JsonDecodeError.MissingField
    }

    guard
      let one = one_optional,
      let nested = nested_optional
    else {
      throw JsonDecodeError.StructErrors(type: "Test07", errors: errors)
    }

    return Test07(one: one, nested: nested)
  }

  func encodeJson() -> [String: AnyObject] {
    var dict: [String: AnyObject] = [:]

    dict["one"] = one.encodeJson()
    dict["nested"] = nested.encodeJson()

    return dict
  }
}

extension Test07.Nested {
  static func decodeJson(json: AnyObject) throws -> Test07.Nested {
    guard let dict = json as? [String : AnyObject] else {
      throw JsonDecodeError.WrongType(rawValue: json, expectedType: "Object")
    }

    var errors: [String: JsonDecodeError] = [:]

    var one_optional: Int?
    var two_optional: Bool?

    if let one_field: AnyObject = dict["one"] {
      do {
        one_optional = try Int.decodeJson(one_field)
      }
      catch let error as JsonDecodeError {
        errors["one"] = error
      }
    }
    else {
      errors["one"] = JsonDecodeError.MissingField
    }

    if let two_field: AnyObject = dict["two"] {
      do {
        two_optional = try Bool.decodeJson(two_field)
      }
      catch let error as JsonDecodeError {
        errors["two"] = error
      }
    }
    else {
      errors["two"] = JsonDecodeError.MissingField
    }

    guard
      let one = one_optional,
      let two = two_optional
    else {
      throw JsonDecodeError.StructErrors(type: "Test07.Nested", errors: errors)
    }

    return Test07.Nested(one: one, two: two)
  }

  func encodeJson() -> [String: AnyObject] {
    var dict: [String: AnyObject] = [:]

    dict["one"] = one.encodeJson()
    dict["two"] = two.encodeJson()

    return dict
  }
}
