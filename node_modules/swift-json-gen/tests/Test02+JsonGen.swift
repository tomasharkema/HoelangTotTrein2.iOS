//
//  Test02+JsonGen.swift
//
//  Auto generated by swift-json-gen on Tue, 22 Sep 2015 12:32:49 GMT
//  See for details: https://github.com/tomlokhorst/swift-json-gen
//

import Foundation

extension Test02 {
  static func decodeJson(json: AnyObject) -> Test02? {
    guard let dict = json as? [String : AnyObject] else {
      assertionFailure("json not a dictionary")
      return nil
    }

    guard let one_field: AnyObject = dict["one"] else {
      assertionFailure("field 'one' is missing")
      return nil
    }
    guard let one: Int = MyInt.decodeJson(one_field) else {
      assertionFailure("field 'one' is not a Int")
      return nil
    }

    let two_field: AnyObject? = dict["two"]
    let two: String? = two_field == nil || two_field! is NSNull ? nil : Optional.decodeJson({ String.decodeJson($0) }, two_field!)

    guard let sub_field: AnyObject = dict["sub"] else {
      assertionFailure("field 'sub' is missing")
      return nil
    }
    guard let sub: Sub = Sub.decodeJson(sub_field) else {
      assertionFailure("field 'sub' is not a Sub")
      return nil
    }

    return Test02(one: one, two: two, sub: sub)
  }

  func encodeJson() -> [String: AnyObject] {
    var dict: [String: AnyObject] = [:]

    dict["one"] = one.encodeJson()
    dict["two"] = two.encodeJson({ $0.encodeJson() })
    dict["sub"] = sub.encodeJson()

    return dict
  }
}

extension Sub {
  static func decodeJson(json: AnyObject) -> Sub? {
    guard let dict = json as? [String : AnyObject] else {
      assertionFailure("json not a dictionary")
      return nil
    }

    guard let one_field: AnyObject = dict["one"] else {
      assertionFailure("field 'one' is missing")
      return nil
    }
    guard let one: NSURL = NSURL.decodeJson(one_field) else {
      assertionFailure("field 'one' is not a NSURL")
      return nil
    }

    guard let two_field: AnyObject = dict["two"] else {
      assertionFailure("field 'two' is missing")
      return nil
    }
    guard let two: NSDate = NSDate.decodeJson(two_field) else {
      assertionFailure("field 'two' is not a NSDate")
      return nil
    }

    return Sub(one: one, two: two)
  }

  func encodeJson() -> [String: AnyObject] {
    var dict: [String: AnyObject] = [:]

    dict["one"] = one.encodeJson()
    dict["two"] = two.encodeJson()

    return dict
  }
}
