//
//  ViewController.swift
//  Test
//
//  Created by Tom Lokhorst on 2015-08-11.
//  Copyright (c) 2015 nonstrict. All rights reserved.
//

import UIKit

class ViewController: UIViewController {

  override func viewDidLoad() {
    super.viewDidLoad()

//    let inputStr = "{ \"title\": \"Hello, World!\", \"published\": true, \"author\": { \"first\": \"Tom\", \"last\": \"Lokhorst\" } }"
//    let inputStr = "{ \"author\": \"Hello, World!\", \"name\": 42, \"posts\": [{\"published\": \"hoi\", \"Xtitle\": \"Hello, World!\"}, {\"title\": \"Hello, World!\"}]  }"
    let inputStr = "{ \"Xone\": 1, \"sub2\": { \"b\": false, \"a\": 3 }, \"stringSub1\": { \"one\": true, \"value\": \"ha\" }, \"intSub1\": { \"one\": true, \"value\": 3 }, \"four\": null, \"sub3\": { \"sub2\": { \"b\": \"ja\", \"Xa\": 3 }, \"a1\": 2, \"a2\": 2, \"c\": [\"hoi\", 42, \"hoi\"] } }"
    let inputData = inputStr.dataUsingEncoding(NSUTF8StringEncoding)!
    let inputObj = try! NSJSONSerialization.JSONObjectWithData(inputData, options: [])

    do {
      let blog = try Test09.decodeJson(inputObj)

      let outputObj = blog.encodeJson()
      let outputData = try! NSJSONSerialization.dataWithJSONObject(outputObj, options: NSJSONWritingOptions.PrettyPrinted)
      let outputStr = String(data: outputData, encoding: NSUTF8StringEncoding)!

      print(outputStr)
    }
    catch let error as JsonDecodeError {
      print(error.description)
      print("-----  full: -------")
      print(error.fullDescription)
    }
    catch {
    }
  }

  override func didReceiveMemoryWarning() {
    super.didReceiveMemoryWarning()
    // Dispose of any resources that can be recreated.
  }


}

